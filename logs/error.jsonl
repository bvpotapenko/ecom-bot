{"timestamp": "2025-09-13 15:14:29", "level": "ERROR", "error": "Unexpected error: string indices must be integers, not 'str'", "exception": "Traceback (most recent call last):\n  File \"/Users/bd/projects/ml-course/ecom-bot/src/app.py\", line 365, in process_message\n    bot_reply = format_reply(bot_resp)\n                ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/projects/ml-course/ecom-bot/src/app.py\", line 309, in format_reply\n    \"\\n    \" + str(action[\"possible_user_action\"]) for action in resp[\"actions\"][0]\n                   ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: string indices must be integers, not 'str'"}
{"timestamp": "2025-09-13 16:29:00", "level": "ERROR", "error": "Unexpected error: 'Input to ChatPromptTemplate is missing variables {\\'\"answer\"\\'}.  Expected: [\\'\"answer\"\\', \\'messages\\'] Received: [\\'messages\\']\\nNote: if you intended {\"answer\"} to be part of the string and not a variable, please escape it with double curly braces like: \\'{{\"answer\"}}\\'.\\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '", "exception": "Traceback (most recent call last):\n  File \"/Users/bd/projects/ml-course/ecom-bot/src/app.py\", line 358, in process_message\n    state = graph.invoke(input_state, graph_config, callbacks=[usage_callback])\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/pregel/main.py\", line 3026, in invoke\n    for chunk in self.stream(\n                 ^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/pregel/main.py\", line 2647, in stream\n    for _ in runner.tick(\n             ^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/pregel/_runner.py\", line 162, in tick\n    run_with_retry(\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/pregel/_retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/_internal/_runnable.py\", line 657, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langgraph/_internal/_runnable.py\", line 401, in invoke\n    ret = self.func(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/projects/ml-course/ecom-bot/src/app.py\", line 282, in llm_node\n    bot_resp = chain.invoke({\"messages\": state[\"messages\"]})\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/runnables/base.py\", line 3080, in invoke\n    input_ = context.run(step.invoke, input_, config, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/prompts/base.py\", line 216, in invoke\n    return self._call_with_config(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/runnables/base.py\", line 1953, in _call_with_config\n    context.run(\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/runnables/config.py\", line 429, in call_func_with_variable_args\n    return func(input, **kwargs)  # type: ignore[call-arg]\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/prompts/base.py\", line 189, in _format_prompt_with_error_handling\n    inner_input_ = self._validate_input(inner_input)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/bd/Library/Caches/pypoetry/virtualenvs/ecom-bot-bOTN4vXs-py3.12/lib/python3.12/site-packages/langchain_core/prompts/base.py\", line 183, in _validate_input\n    raise KeyError(\nKeyError: 'Input to ChatPromptTemplate is missing variables {\\'\"answer\"\\'}.  Expected: [\\'\"answer\"\\', \\'messages\\'] Received: [\\'messages\\']\\nNote: if you intended {\"answer\"} to be part of the string and not a variable, please escape it with double curly braces like: \\'{{\"answer\"}}\\'.\\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '\nDuring task with name 'llm_node' and id '4db88de6-80f1-e072-b73b-a3118f7b4054'"}
